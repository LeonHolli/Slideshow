<!DOCTYPE html>
<html>
  <head>
    <title>Slideshow</title>
    <script src="/static/script.js" defer></script>
    <style>
      body {
        margin: 0;
        background-color: black;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
      }
      #slideshow {
        max-width: 100vw;
        max-height: 100vh;
        object-fit: contain;
        background-color: black;
        transition: opacity 0.8s ease-in-out;
        opacity: 1;
      }
      #backButton {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.8);
        border: none;
        color: black;
        font-size: 22px;
        cursor: pointer;
        padding: 8px 12px;
        border-radius: 50%;
        z-index: 9999;
        transition: opacity 0.3s;
      }
      #backButton.hidden {
        opacity: 0;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <img id="slideshow" src="" />
    <button id="backButton" onclick="window.location.href='/'">â¬…</button>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const folder = "{{ folder }}";
        const interval = parseInt("{{ interval * 1000 }}", 10);
        startSlideshow(folder, interval);
        setupBackButtonAutoHide();
      });

      function setupBackButtonAutoHide() {
        const btn = document.getElementById("backButton");
        let hideTimeout;

        function showButton() {
          btn.classList.remove("hidden");
          clearTimeout(hideTimeout);
          hideTimeout = setTimeout(() => {
            btn.classList.add("hidden");
          }, 2000);
        }

        // initial starten
        showButton();

        // bei Mausbewegung oder Klick wieder sichtbar
        document.addEventListener("mousemove", showButton);
        document.addEventListener("click", showButton);
        document.addEventListener("keydown", showButton); // optional: bei Tastendruck
      }
    </script>
  </body>
</html>
